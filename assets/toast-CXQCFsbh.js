import{ssr as B,ssrHydrationKey as R,createComponent as c,mergeProps as p,isServer as ze,escape as ge,Portal as Ve}from"solid-js/web";import{createMemo as ee,createSignal as P,createEffect as m,untrack as je,onCleanup as k,createContext as we,splitProps as g,on as O,For as We,createUniqueId as Te,onMount as Ye,Show as Xe,useContext as ye}from"solid-js";import{cva as Ue}from"class-variance-authority";import{a as z,_ as Ge,B as qe,m as V,P as b,s as Je,h,c as me,f as Qe,j as Pe,t as Ze,k as N}from"./button-F3SseNjq.js";import{createStore as et}from"solid-js/store";var tt="data-kb-top-layer",xe,Q=!1,w=[];function M(e){return w.findIndex(t=>t.node===e)}function nt(e){return w[M(e)]}function rt(e){return w[w.length-1].node===e}function be(){return w.filter(e=>e.isPointerBlocking)}function ot(){return[...be()].slice(-1)[0]}function te(){return be().length>0}function Ie(e){const t=M(ot()?.node);return M(e)<t}function st(e){w.push(e)}function it(e){const t=M(e);t<0||w.splice(t,1)}function at(){for(const{node:e}of w)e.style.pointerEvents=Ie(e)?"none":"auto"}function ct(e){if(te()&&!Q){const t=z(e);xe=document.body.style.pointerEvents,t.body.style.pointerEvents="none",Q=!0}}function lt(e){if(te())return;const t=z(e);t.body.style.pointerEvents=xe,t.body.style.length===0&&t.body.removeAttribute("style"),Q=!1}var Yt={layers:w,isTopMostLayer:rt,hasPointerBlockingLayer:te,isBelowPointerBlockingLayer:Ie,addLayer:st,removeLayer:it,indexOf:M,find:nt,assignPointerEventToLayers:at,disableBodyPointerEvents:ct,restoreBodyPointerEvents:lt};function fe(e){return t=>(e(t),()=>e(void 0))}var H=e=>typeof e=="function"?e():e,ut=e=>{const t=ee(()=>{const a=H(e.element);if(a)return getComputedStyle(a)}),n=()=>t()?.animationName??"none",[r,i]=P(H(e.show)?"present":"hidden");let l="none";return m(a=>{const u=H(e.show);return je(()=>{if(a===u)return u;const d=l,s=n();u?i("present"):s==="none"||t()?.display==="none"?i("hidden"):i(a===!0&&d!==s?"hiding":"hidden")}),u}),m(()=>{const a=H(e.element);if(!a)return;const u=s=>{s.target===a&&(l=n())},d=s=>{const T=n().includes(s.animationName);s.target===a&&T&&r()==="hiding"&&i("hidden")};a.addEventListener("animationstart",u),a.addEventListener("animationcancel",d),a.addEventListener("animationend",d),k(()=>{a.removeEventListener("animationstart",u),a.removeEventListener("animationcancel",d),a.removeEventListener("animationend",d)})}),{present:()=>r()==="present"||r()==="hiding",state:r}},dt=ut,pt=dt,gt=["<svg",' fill="currentColor" stroke-width="0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" height="1em" width="1em" style="overflow:visible;color:currentcolor;"><path d="M0 96c0-17.7 14.3-32 32-32h384c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32h384c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zm448 160c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32h384c17.7 0 32 14.3 32 32z"></path></svg>'],mt=["<svg",' fill="currentColor" stroke-width="0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="1em" width="1em" style="overflow:visible;color:currentcolor;"><path d="M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64c0 247.4 200.6 448 448 448 18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368c-70.4-33.3-127.4-90.3-160.7-160.7l49.3-40.3c13.7-11.2 18.4-30 11.6-46.3l-40-96z"></path></svg>'],ft=["<svg",' fill="none" stroke-width="2" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" height="1em" width="1em" style="overflow:visible;color:currentcolor;"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><path d="M22 6 12 13 2 6"></path></svg>'];function Xt(e){return B(gt,R())}function Ut(e){return B(mt,R())}function Gt(e){return B(ft,R())}var vt={};Ge(vt,{CloseButton:()=>ne,Description:()=>re,List:()=>se,ProgressFill:()=>Se,ProgressTrack:()=>Ae,Region:()=>ae,Root:()=>ce,Title:()=>le,Toast:()=>Ot,toaster:()=>ue});var Ee=we();function j(){const e=ye(Ee);if(e===void 0)throw new Error("[kobalte]: `useToastContext` must be used within a `Toast.Root` component");return e}function ne(e){const t=j(),[n,r]=g(e,["aria-label","onClick"]);return c(qe,p({get"aria-label"(){return n["aria-label"]||t.translations().close},onClick:l=>{h(l,n.onClick),t.close()}},r))}function re(e){const t=j(),n=V({id:t.generateId("description")},e),[r,i]=g(n,["id"]);return m(()=>k(t.registerDescriptionId(r.id))),c(b,p({as:"div",get id(){return r.id}},i))}var ke=we();function oe(){const e=ye(ke);if(e===void 0)throw new Error("[kobalte]: `useToastRegionContext` must be used within a `Toast.Region` component");return e}function se(e){let t;const n=oe(),[r,i]=g(e,["ref","onFocusIn","onFocusOut","onPointerMove","onPointerLeave"]),l=s=>{h(s,r.onFocusIn),n.pauseOnInteraction()&&!n.isPaused()&&n.pauseAllTimer()},a=s=>{h(s,r.onFocusOut),me(t,s.relatedTarget)||n.resumeAllTimer()},u=s=>{h(s,r.onPointerMove),n.pauseOnInteraction()&&!n.isPaused()&&n.pauseAllTimer()},d=s=>{h(s,r.onPointerLeave),me(t,z(t).activeElement)||n.resumeAllTimer()};return m(O([()=>t,()=>n.hotkey()],([s,f])=>{if(ze||!s)return;const T=z(s),y=F=>{f.every(S=>F[S]||F.code===S)&&Qe(s)};T.addEventListener("keydown",y),k(()=>T.removeEventListener("keydown",y))})),m(()=>{if(!n.pauseOnPageIdle())return;const s=Je(t);s.addEventListener("blur",n.pauseAllTimer),s.addEventListener("focus",n.resumeAllTimer),k(()=>{s.removeEventListener("blur",n.pauseAllTimer),s.removeEventListener("focus",n.resumeAllTimer)})}),c(b,p({as:"ol",tabIndex:-1,onFocusIn:l,onFocusOut:a,onPointerMove:u,onPointerLeave:d},i,{get children(){return c(We,{get each(){return n.toasts()},children:s=>s.toastComponent({get toastId(){return s.id}})})}}))}function Se(e){const t=oe(),n=j(),[r,i]=g(e,["style"]),[l,a]=P(100);let u=0;return m(()=>{if(t.isPaused()||n.isPersistent())return;const d=setInterval(()=>{const s=new Date().getTime()-n.closeTimerStartTime()+u,f=Math.trunc(100-s/n.duration()*100);a(f<0?0:f)});k(()=>{u+=new Date().getTime()-n.closeTimerStartTime(),clearInterval(d)})}),c(b,p({as:"div",get style(){return{"--kb-toast-progress-fill-width":`${l()}%`,...r.style}}},i))}function Ae(e){return c(b,p({as:"div","aria-hidden":"true",role:"presentation"},e))}var[ie,$]=et({toasts:[]});function ht(e){$("toasts",t=>[...t,e])}function wt(e){return ie.toasts.find(t=>t.id===e)}function Tt(e,t){const n=ie.toasts.findIndex(r=>r.id===e);n!==-1&&$("toasts",r=>[...r.slice(0,n),t,...r.slice(n+1)])}function yt(e){$("toasts",t=>t.id===e,"dismiss",!0)}function Pt(e){$("toasts",t=>t.filter(n=>n.id!==e))}function xt(){$("toasts",[])}var x={toasts:()=>ie.toasts,add:ht,get:wt,update:Tt,dismiss:yt,remove:Pt,clear:xt},ve="{hotkey}",bt={close:"Close"},It={notifications:e=>`Notifications (${e})`};function ae(e){const t=V({id:`toast-region-${Te()}`,hotkey:["altKey","KeyT"],duration:5e3,limit:3,swipeDirection:"right",swipeThreshold:50,pauseOnInteraction:!0,pauseOnPageIdle:!0,topLayer:!0,translations:It},e),[n,r]=g(t,["translations","style","hotkey","duration","limit","swipeDirection","swipeThreshold","pauseOnInteraction","pauseOnPageIdle","topLayer","aria-label","regionId"]),i=ee(()=>x.toasts().filter(y=>y.region===n.regionId).slice(0,n.limit)),[l,a]=P(!1),u=()=>i().length>0,d=()=>n.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,""),s=()=>(n["aria-label"]||n.translations.notifications(ve)).replace(ve,d()),f=()=>({[tt]:n.topLayer?"":void 0}),T={isPaused:l,toasts:i,hotkey:()=>n.hotkey,duration:()=>n.duration,swipeDirection:()=>n.swipeDirection,swipeThreshold:()=>n.swipeThreshold,pauseOnInteraction:()=>n.pauseOnInteraction,pauseOnPageIdle:()=>n.pauseOnPageIdle,pauseAllTimer:()=>a(!0),resumeAllTimer:()=>a(!1),generateId:Pe(()=>r.id)};return c(ke.Provider,{value:T,get children(){return c(b,p({as:"div",role:"region",tabIndex:-1,get"aria-label"(){return s()},get style(){return{"pointer-events":u()?n.topLayer?"auto":void 0:"none",...n.style}}},f,r))}})}var Et="toast.swipeStart",kt="toast.swipeMove",St="toast.swipeCancel",At="toast.swipeEnd";function ce(e){const t=oe(),n=V({id:`toast-${Te()}`,priority:"high",translations:bt},e),[r,i]=g(n,["ref","translations","toastId","style","priority","duration","persistent","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd","onEscapeKeyDown","onKeyDown","onPointerDown","onPointerMove","onPointerUp"]),[l,a]=P(!0),[u,d]=P(),[s,f]=P(),[T,y]=P(!0),[F,Le]=P(),{present:S}=pt({show:l,element:()=>F()??null}),W=ee(()=>r.duration||t.duration());let Y,X=0,U=W(),I=null,A=null;const D=()=>{a(!1),y(!0)},Ce=()=>{x.remove(r.toastId)},de=o=>{!o||r.persistent||(window.clearTimeout(Y),X=new Date().getTime(),Y=window.setTimeout(D,o))},_e=()=>{de(U),r.onResume?.()},Oe=()=>{const o=new Date().getTime()-X;U=U-o,window.clearTimeout(Y),r.onPause?.()},Me=o=>{h(o,r.onKeyDown),o.key==="Escape"&&(r.onEscapeKeyDown?.(o),o.defaultPrevented||D())},Be=o=>{h(o,r.onPointerDown),o.button===0&&(I={x:o.clientX,y:o.clientY})},Re=o=>{if(h(o,r.onPointerMove),!I)return;const v=o.clientX-I.x,L=o.clientY-I.y,G=!!A,C=["left","right"].includes(t.swipeDirection()),E=["left","up"].includes(t.swipeDirection())?Math.min:Math.max,q=C?E(0,v):0,Fe=C?0:E(0,L),J=o.pointerType==="touch"?10:2,_={x:q,y:Fe},pe={originalEvent:o,delta:_};if(G){A=_,K(kt,r.onSwipeMove,pe);const{x:He,y:Ke}=_;o.currentTarget.setAttribute("data-swipe","move"),o.currentTarget.style.setProperty("--kb-toast-swipe-move-x",`${He}px`),o.currentTarget.style.setProperty("--kb-toast-swipe-move-y",`${Ke}px`)}else he(_,t.swipeDirection(),J)?(A=_,K(Et,r.onSwipeStart,pe),o.currentTarget.setAttribute("data-swipe","start"),o.target.setPointerCapture(o.pointerId)):(Math.abs(v)>J||Math.abs(L)>J)&&(I=null)},Ne=o=>{h(o,r.onPointerUp);const v=A,L=o.target;if(L.hasPointerCapture(o.pointerId)&&L.releasePointerCapture(o.pointerId),A=null,I=null,v){const G=o.currentTarget,C={originalEvent:o,delta:v};if(he(v,t.swipeDirection(),t.swipeThreshold())){K(At,r.onSwipeEnd,C);const{x:E,y:q}=v;o.currentTarget.setAttribute("data-swipe","end"),o.currentTarget.style.removeProperty("--kb-toast-swipe-move-x"),o.currentTarget.style.removeProperty("--kb-toast-swipe-move-y"),o.currentTarget.style.setProperty("--kb-toast-swipe-end-x",`${E}px`),o.currentTarget.style.setProperty("--kb-toast-swipe-end-y",`${q}px`),D()}else K(St,r.onSwipeCancel,C),o.currentTarget.setAttribute("data-swipe","cancel"),o.currentTarget.style.removeProperty("--kb-toast-swipe-move-x"),o.currentTarget.style.removeProperty("--kb-toast-swipe-move-y"),o.currentTarget.style.removeProperty("--kb-toast-swipe-end-x"),o.currentTarget.style.removeProperty("--kb-toast-swipe-end-y");G.addEventListener("click",E=>E.preventDefault(),{once:!0})}};Ye(()=>{t.toasts().find(o=>o.id===r.toastId&&o.update)&&y(!1)}),m(O(()=>t.isPaused(),o=>{o?Oe():_e()},{defer:!0})),m(O([l,W],([o,v])=>{o&&!t.isPaused()&&de(v)})),m(O(()=>x.get(r.toastId)?.dismiss,o=>o&&D())),m(O(()=>S(),o=>!o&&Ce()));const $e={translations:()=>r.translations,close:D,duration:W,isPersistent:()=>r.persistent??!1,closeTimerStartTime:()=>X,generateId:Pe(()=>i.id),registerTitleId:fe(d),registerDescriptionId:fe(f)};return c(Xe,{get when(){return S()},get children(){return c(Ee.Provider,{value:$e,get children(){return c(b,p({as:"li",role:"status",tabIndex:0,get style(){return{animation:T()?void 0:"none","user-select":"none","touch-action":"none",...r.style}},get"aria-live"(){return r.priority==="high"?"assertive":"polite"},"aria-atomic":"true",get"aria-labelledby"(){return u()},get"aria-describedby"(){return s()},get"data-opened"(){return l()?"":void 0},get"data-closed"(){return l()?void 0:""},get"data-swipe-direction"(){return t.swipeDirection()},onKeyDown:Me,onPointerDown:Be,onPointerMove:Re,onPointerUp:Ne},i))}})}})}function he(e,t,n=0){const r=Math.abs(e.x),i=Math.abs(e.y),l=r>i;return t==="left"||t==="right"?l&&r>n:!l&&i>n}function K(e,t,n){const r=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),r.dispatchEvent(i)}function le(e){const t=j(),n=V({id:t.generateId("title")},e),[r,i]=g(n,["id"]);return m(()=>k(t.registerTitleId(r.id))),c(b,p({as:"div",get id(){return r.id}},i))}var Dt=0;function De(e,t){const n=Dt++;return x.add({id:n,toastComponent:e,dismiss:!1,update:!1,region:t?.region}),n}function Z(e,t){x.update(e,{id:e,toastComponent:t,dismiss:!1,update:!0})}function Lt(e,t,n){const r=De(i=>t({get toastId(){return i.toastId},state:"pending"}),n);return(Ze(e)?e():e).then(i=>Z(r,l=>t({get toastId(){return l.toastId},state:"fulfilled",data:i}))).catch(i=>Z(r,l=>t({get toastId(){return l.toastId},state:"rejected",error:i}))),r}function Ct(e){return x.dismiss(e),e}function _t(){x.clear()}var ue={show:De,update:Z,promise:Lt,dismiss:Ct,clear:_t},Ot=Object.assign(ce,{CloseButton:ne,Description:re,List:se,ProgressFill:Se,ProgressTrack:Ae,Region:ae,Title:le,toaster:ue}),Mt=["<svg",' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-4"><path d="M18 6l-12 12"></path><path d="M6 6l12 12"></path></svg>'],Bt=["<div",' class="grid gap-1"><!--$-->',"<!--/--><!--$-->","<!--/--></div>"];const Rt=Ue("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--kb-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--kb-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[opened]:animate-in data-[closed]:animate-out data-[swipe=end]:animate-out data-[closed]:fade-out-80 data-[closed]:slide-out-to-right-full data-[opened]:slide-in-from-top-full data-[opened]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground",success:"success border-success-foreground bg-success text-success-foreground",warning:"warning border-warning-foreground bg-warning text-warning-foreground",error:"error border-error-foreground bg-error text-error-foreground"}},defaultVariants:{variant:"default"}}),qt=e=>{const[t,n]=g(e,["class"]);return c(Ve,{get children(){return c(ae,{get children(){return c(se,p({get class(){return N("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse gap-2 p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t.class)}},n))}})}})},Nt=e=>{const[t,n]=g(e,["class","variant"]);return c(ce,p({get class(){return N(Rt({variant:t.variant}),t.class)}},n))},$t=e=>{const[t,n]=g(e,["class"]);return c(ne,p({get class(){return N("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-destructive-foreground group-[.error]:text-error-foreground group-[.success]:text-success-foreground group-[.warning]:text-warning-foreground",t.class)}},n,{get children(){return B(Mt,R())}}))},Ft=e=>{const[t,n]=g(e,["class"]);return c(le,p({get class(){return N("text-sm font-semibold",t.class)}},n))},Ht=e=>{const[t,n]=g(e,["class"]);return c(re,p({get class(){return N("text-sm opacity-90",t.class)}},n))};function Jt(e){ue.show(t=>c(Nt,{get toastId(){return t.toastId},get variant(){return e.variant},get duration(){return e.duration},get children(){return[B(Bt,R(),e.title&&ge(c(Ft,{get children(){return e.title}})),e.description&&ge(c(Ht,{get children(){return e.description}}))),c($t,{})]}}))}export{tt as D,Xt as F,qt as T,H as a,Ut as b,fe as c,Gt as d,Jt as e,Yt as l,pt as s};
